---
import { getCollection } from 'astro:content';
import { lightFormat } from 'date-fns';

import Layout from '@layouts/Layout.astro';

const posts = await getCollection('posts', ({ data }) => {
    return data.status !== 'draft';
});
---

<Layout
    title="Dishan Sachin"
    description="Check out my thoughts on software development, tools, and other cool stuff."
>
    <h1 class="font-semibold mb-8 font-['Newsreader_Variable'] text-5xl">
        All Posts
    </h1>
    {
        posts.map((post) => (
            <>
                <article class="my-10 flex w-full flex-col space-y-4">
                    <p class="font-['Newsreader_Variable'] text-2xl font-semibold text-neutral-900 dark:text-neutral-100">
                        <a href={`/blog/${post.slug}`}>{post.data.title}</a>
                    </p>
                    <p class="text-xl text-neutral-900 dark:text-neutral-100">
                        {post.data.description}
                    </p>
                    <p class="text-neutral-600 dark:text-neutral-400">
                        {lightFormat(
                            new Date(
                                post.data.publishedAt.toLocaleDateString(),
                            ),
                            'yyyy-MM-dd',
                        )}
                    </p>
                </article>
                <hr />
            </>
        ))
    }
</Layout>
